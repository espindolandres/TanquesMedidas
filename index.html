<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medidas Tanques - B√∫squeda R√°pida</title>
    <style>
        :root {
            --color-bg: #f8f9fa;
            --color-primary: #2196F3;
            --color-primary-dark: #1976D2;
            --color-success: #4CAF50;
            --color-error: #f44336;
            --color-text: #333;
            --color-text-light: #666;
            --color-border: #ddd;
            --color-card: white;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            padding: 12px;
            line-height: 1.6;
        }
        .container { max-width: 500px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 24px; padding-top: 12px; }
        header h1 { font-size: 24px; color: var(--color-primary); margin-bottom: 6px; }
        header p { color: var(--color-text-light); font-size: 14px; }
        .card {
            background: var(--color-card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .form-group { margin-bottom: 18px; }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-text);
            font-size: 14px;
        }
        select, input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            color: var(--color-text);
            background: white;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        select:focus, input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        input[type="number"] { font-size: 18px; }
        .result-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid var(--color-primary);
            padding: 18px;
            border-radius: 8px;
            text-align: center;
            margin-top: 16px;
            display: none;
        }
        .result-box.active { display: block; }
        .result-label {
            color: var(--color-text-light);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        .result-value { font-size: 36px; font-weight: bold; color: var(--color-success); }
        .result-unit { color: var(--color-text-light); font-size: 16px; margin-top: 4px; }
        .error-message {
            background: #ffebee;
            color: var(--color-error);
            padding: 12px 14px;
            border-radius: 6px;
            margin-top: 12px;
            display: none;
            font-size: 14px;
            border-left: 4px solid var(--color-error);
        }
        .error-message.active { display: block; }
        button {
            width: 100%;
            padding: 14px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.1s;
            margin-top: 10px;
        }
        button:active { transform: scale(0.98); }
        button:hover { background: var(--color-primary-dark); }
        .info-box {
            background: #f5f5f5;
            padding: 14px;
            border-radius: 8px;
            font-size: 13px;
            color: var(--color-text-light);
            margin-top: 16px;
            line-height: 1.8;
        }
        .info-box strong { color: var(--color-text); }
        .table-preview {
            margin-top: 16px;
            border-radius: 8px;
            overflow: auto;
            border: 1px solid var(--color-border);
            max-height: 320px;
        }
        .table-preview table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        .table-preview thead { background: var(--color-primary); color: white; }
        .table-preview th, .table-preview td {
            padding: 10px;
            text-align: center;
        }
        .table-preview tbody tr:nth-child(odd) { background: #fafafa; }
        .table-preview tbody tr:hover { background: #f0f0f0; }
        @media (max-width: 480px) {
            body { padding: 8px; }
            .card { padding: 16px; }
            header h1 { font-size: 22px; }
            .result-value { font-size: 32px; }
        }
        .mode-note {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Medidas Tanques</h1>
            <p>B√∫squeda autom√°tica de capacidad</p>
        </header>

        <div class="card">
            <div class="form-group">
                <label for="tanque">üì¶ Selecciona el tanque:</label>
                <select id="tanque">
                    <option value="250L">250L</option>
                    <option value="500L">500L</option>
                    <option value="1000L">1000L</option>
                    <option value="2000L">2000L</option>
                    <option value="5000L">5000L</option>
                </select>
            </div>

            <div class="form-group">
                <label for="altura">üìè Altura medida (cm):</label>
                <input type="number" id="altura" placeholder="Ej: 39" min="0" step="0.1">
            </div>

            <div class="form-group">
                <label for="litros">üíß Litros medidos (opcional):</label>
                <input type="number" id="litros" placeholder="Ej: 400" min="0" step="0.1">
                <div class="mode-note">
                    ‚Ä¢ Si llenas ALTURA, calcula LITROS.<br>
                    ‚Ä¢ Si dejas ALTURA vac√≠o y llenas LITROS, calcula ALTURA (cm).
                </div>
            </div>

            <div class="form-group">
                <label for="vacio">üìâ Medida en vac√≠o (cm):</label>
                <input type="number" id="vacio" placeholder="Ej: 100" min="0" step="0.1">
                <div class="mode-note">
                    ‚Ä¢ Si llenas VAC√çO, calcula los LITROS LLENOS.<br>
                    ‚Ä¢ El vac√≠o se mide desde el fondo hasta el nivel del l√≠quido.
                </div>
            </div>

            <button onclick="buscar()">üîé Calcular</button>

            <div class="result-box" id="resultBox">
                <div class="result-label">Resultado:</div>
                <div class="result-value" id="resultValue">‚Äî</div>
                <div class="result-unit" id="resultUnit">litros</div>
            </div>

            <div class="error-message" id="errorMsg"></div>

            <div class="info-box">
                <strong>‚úì C√≥mo usar:</strong><br>
                1. Selecciona el tipo de tanque.<br>
                2. Modo A: escribe ALTURA (cm) ‚Üí obtienes LITROS.<br>
                3. Modo B: deja ALTURA vac√≠o y escribe LITROS ‚Üí obtienes ALTURA (cm).<br>
                4. Modo C: escribe VAC√çO (cm) ‚Üí obtienes LITROS LLENOS.<br>
                5. Haz clic en ‚ÄúCalcular‚Äù.
            </div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 14px; color: var(--color-primary);">üìä Previa de datos:</h3>
            <div class="table-preview" id="tablePreview"></div>
        </div>
    </div>

    <script>
        const datos = {
            "250L": [
                [4.5, 10], [9, 20], [13, 30], [17, 40], [21, 50],
                [25, 60], [28.5, 70], [32, 80], [35.5, 90], [39, 100],
                [42.5, 110], [46, 120], [49, 130], [52, 140], [56, 150],
                [59, 160], [62, 170], [65, 180], [68, 190], [71, 200],
                [74, 210], [76.5, 220], [79, 230], [81, 240], [83, 250]
            ],
            "500L": [
                [0,     0],
                [21,   100],
                [30.5, 150],
                [40,   200],
                [49,   250],
                [58,   300],
                [66,   350],
                [74,   400],
                [83.25,450],
                [92.5, 500]
            ],
            "1000L": [
                [13.5, 100], [20.3, 150], [27, 200], [34.5, 250], [42, 300],
                [50, 350], [58, 400], [65, 450], [72, 500], [77, 550],
                [82, 600], [87.5, 650], [93, 700], [99, 750], [105, 800],
                [110, 850], [115, 900], [121, 950], [127, 1000]
            ],
            "2000L": [
                [12, 100], [18, 150], [24, 200], [31.1, 250], [38.2, 300],
                [39.9, 350], [41.5, 400], [45.9, 450], [50.3, 500], [54.5, 550],
                [59, 600], [63.5, 650], [68, 700], [72, 750], [76.5, 800],
                [80.2, 850], [84, 900], [89, 950], [92, 1000], [96, 1050],
                [100, 1100], [104, 1150], [108, 1200], [112, 1250], [117, 1300],
                [121, 1350], [125, 1400], [128, 1450], [132, 1500], [135, 1550],
                [138, 1600], [142, 1650], [145, 1700], [148.6, 1750], [152, 1800],
                [156, 1850], [158, 1900], [161, 1950], [164, 2000]
            ],
            "5000L": [
                [2.5, 50], [5, 100], [7.5, 150], [10, 200], [12.5, 250],
                [14.5, 300], [16.5, 350], [18.5, 400], [22.2, 450], [24.5, 500],
                [26.7, 550], [27.5, 600], [29.2, 650], [30.7, 700], [32.3, 750],
                [34, 800], [36.5, 850], [39, 900], [41.5, 950], [44, 1000],
                [46, 1050], [48, 1100], [50, 1150], [52, 1200], [54.2, 1250],
                [56.2, 1300], [58.4, 1350], [60.5, 1400], [62.4, 1450], [64.5, 1500],
                [66.5, 1550], [68, 1600], [70, 1650], [72, 1700], [74, 1750],
                [76, 1800], [77.1, 1850], [79.1, 1900], [81.7, 1950], [83.7, 2000],
                [85.4, 2050], [87.1, 2100], [88.8, 2150], [90.5, 2200], [92.6, 2250],
                [94.7, 2300], [96.8, 2350], [99, 2400], [100.7, 2450], [102.5, 2500],
                [104.2, 2550], [106, 2600], [108, 2650], [110, 2700], [112, 2750],
                [114, 2800], [115.7, 2850], [117.2, 2900], [119.2, 2950], [121, 3000],
                [122.7, 3050], [124.5, 3100], [126.2, 3150], [128, 3200], [129.7, 3250],
                [131.2, 3300], [133.2, 3350], [135, 3400], [136.7, 3450], [138.4, 3500],
                [140.2, 3550], [142, 3600], [143.7, 3650], [145.5, 3700], [147.2, 3750],
                [149, 3800], [150.7, 3850], [152.2, 3900], [154.2, 3950], [156, 4000],
                [158, 4050], [160, 4100], [162, 4150], [164, 4200], [166.7, 4250],
                [168.4, 4300], [170.2, 4350], [171, 4400], [173, 4450], [175, 4500],
                [177, 4550], [179, 4600], [181, 4650], [183, 4700], [185, 4750],
                [187, 4800], [188.8, 4850], [190.7, 4900], [192.6, 4950], [194.5, 5000]
            ]
        };

        const alturasMaximas = {
            "250L": 83,
            "500L": 92.5,
            "1000L": 127,
            "2000L": 164,
            "5000L": 194.5
        };

        function alturaToLitros(tanque, altura) {
            const tabla = datos[tanque];
            let encontrado = false;
            let litros = null;

            for (let i = 0; i < tabla.length; i++) {
                if (Math.abs(tabla[i][0] - altura) < 0.01) {
                    litros = tabla[i][1];
                    encontrado = true;
                    break;
                }
            }

            if (!encontrado) {
                for (let i = 0; i < tabla.length - 1; i++) {
                    if (altura >= tabla[i][0] && altura <= tabla[i + 1][0]) {
                        const x1 = tabla[i][0], y1 = tabla[i][1];
                        const x2 = tabla[i + 1][0], y2 = tabla[i + 1][1];
                        litros = y1 + (altura - x1) * (y2 - y1) / (x2 - x1);
                        encontrado = true;
                        break;
                    }
                }
            }

            return { encontrado, litros };
        }

        function litrosToAltura(tanque, litrosBuscados) {
            const tabla = datos[tanque];
            let encontrado = false;
            let altura = null;

            for (let i = 0; i < tabla.length; i++) {
                if (Math.abs(tabla[i][1] - litrosBuscados) < 0.01) {
                    altura = tabla[i][0];
                    encontrado = true;
                    break;
                }
            }

            if (!encontrado) {
                for (let i = 0; i < tabla.length - 1; i++) {
                    if (litrosBuscados >= tabla[i][1] && litrosBuscados <= tabla[i + 1][1]) {
                        const y1 = tabla[i][1], x1 = tabla[i][0];
                        const y2 = tabla[i + 1][1], x2 = tabla[i + 1][0];
                        altura = x1 + (litrosBuscados - y1) * (x2 - x1) / (y2 - y1);
                        encontrado = true;
                        break;
                    }
                }
            }

            return { encontrado, altura };
        }

        function buscar() {
            const tanque = document.getElementById('tanque').value;
            const alturaStr = document.getElementById('altura').value;
            const litrosStr = document.getElementById('litros').value;
            const vacioStr = document.getElementById('vacio').value;

            const resultBox = document.getElementById('resultBox');
            const resultValue = document.getElementById('resultValue');
            const resultUnit = document.getElementById('resultUnit');
            const errorMsg = document.getElementById('errorMsg');

            errorMsg.classList.remove('active');
            resultBox.classList.remove('active');

            if (alturaStr !== '') {
                const altura = parseFloat(alturaStr);
                if (isNaN(altura) || altura < 0) {
                    errorMsg.textContent = '‚ö†Ô∏è Por favor, ingresa una altura v√°lida.';
                    errorMsg.classList.add('active');
                    return;
                }

                const res = alturaToLitros(tanque, altura);
                if (!res.encontrado) {
                    errorMsg.textContent = `‚ö†Ô∏è La altura ${altura}cm est√° fuera de rango para el tanque ${tanque}.`;
                    errorMsg.classList.add('active');
                    return;
                }

                resultValue.textContent = res.litros.toFixed(2);
                resultUnit.textContent = 'litros';
                resultBox.classList.add('active');
                return;
            }

            if (litrosStr !== '') {
                const litros = parseFloat(litrosStr);
                if (isNaN(litros) || litros < 0) {
                    errorMsg.textContent = '‚ö†Ô∏è Por favor, ingresa una cantidad de litros v√°lida.';
                    errorMsg.classList.add('active');
                    return;
                }

                const res = litrosToAltura(tanque, litros);
                if (!res.encontrado) {
                    errorMsg.textContent = `‚ö†Ô∏è Los ${litros}L est√°n fuera de rango para el tanque ${tanque}.`;
                    errorMsg.classList.add('active');
                    return;
                }

                resultValue.textContent = res.altura.toFixed(2);
                resultUnit.textContent = 'cm';
                resultBox.classList.add('active');
                return;
            }

            if (vacioStr !== '') {
                const vacio = parseFloat(vacioStr);
                if (isNaN(vacio) || vacio < 0) {
                    errorMsg.textContent = '‚ö†Ô∏è Por favor, ingresa una medida de vac√≠o v√°lida.';
                    errorMsg.classList.add('active');
                    return;
                }

                const alturaTotal = alturasMaximas[tanque];
                if (vacio > alturaTotal) {
                    errorMsg.textContent = `‚ö†Ô∏è El vac√≠o (${vacio}cm) supera la altura total del tanque (${alturaTotal}cm).`;
                    errorMsg.classList.add('active');
                    return;
                }

                const alturaLleno = alturaTotal - vacio;
                const res = alturaToLitros(tanque, alturaLleno);
                if (!res.encontrado) {
                    errorMsg.textContent = `‚ö†Ô∏è La altura de lleno (${alturaLleno}cm) est√° fuera de rango para el tanque ${tanque}.`;
                    errorMsg.classList.add('active');
                    return;
                }

                resultValue.textContent = res.litros.toFixed(2);
                resultUnit.textContent = 'litros llenos';
                resultBox.classList.add('active');
                return;
            }

            errorMsg.textContent = '‚ö†Ô∏è Ingresa ALTURA, LITROS o VAC√çO para calcular.';
            errorMsg.classList.add('active');
        }

        function actualizarTabla() {
            const tanque = document.getElementById('tanque').value;
            const tabla = datos[tanque];
            const tablePreview = document.getElementById('tablePreview');

            let html = '<table><thead><tr><th>Altura (cm)</th><th>Litros</th></tr></thead><tbody>';
            for (let i = 0; i < tabla.length; i++) {
                html += `<tr><td>${tabla[i][0]}</td><td>${tabla[i][1]}</td></tr>`;
            }
            html += '</tbody></table>';
            tablePreview.innerHTML = html;
        }

        document.getElementById('tanque').addEventListener('change', actualizarTabla);
        document.getElementById('altura').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') buscar();
        });
        document.getElementById('litros').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') buscar();
        });
        document.getElementById('vacio').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') buscar();
        });

        const inputAltura = document.getElementById('altura');
        const inputLitros = document.getElementById('litros');
        const inputVacio = document.getElementById('vacio');

        inputAltura.addEventListener('input', () => {
            if (inputAltura.value !== '') {
                inputLitros.value = '';
                inputVacio.value = '';
            }
        });

        inputLitros.addEventListener('input', () => {
            if (inputLitros.value !== '') {
                inputAltura.value = '';
                inputVacio.value = '';
            }
        });

        inputVacio.addEventListener('input', () => {
            if (inputVacio.value !== '') {
                inputAltura.value = '';
                inputLitros.value = '';
            }
        });

        actualizarTabla();
    </script>

    <footer style="
        text-align:center;
        margin-top:20px;
        padding:10px 0;
        font-size:12px;
        color:#888;
    ">
        ¬© 2025 Andres_Gonzalez. Todos los derechos reservados. Desarrollado por Andres Felipe Gonzalez Espindola.
    </footer>
</body>
</html>


